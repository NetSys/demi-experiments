{
  "additional_metadata": null,
  "argv": [
    "./interposition/src/main/python/setup.py",
    "-t",
    "-n",
    "akka-raft-fuzz-long"
  ],
  "cwd": "/Users/cs/Research/UCB/code/sts2-applications",
  "host": {
    "cpu_info": "",
    "free": "",
    "name": "yossarian",
    "num_cores": "0",
    "uptime": "12:48  up 9 days, 10:45, 8 users, load averages: 2.22 1.75 1.63"
  },
  "modules": {
    "sts2": {
      "branch": "raft-56",
      "commit": "85efb9d4746ebd10b69d165d2fa0b0c2d90fc8e4",
      "diff": "diff --git a/src/main/scala/pl/project13/Runner.scala b/src/main/scala/pl/project13/Runner.scala\nindex ef366bc..7b81800 100644\n--- a/src/main/scala/pl/project13/Runner.scala\n+++ b/src/main/scala/pl/project13/Runner.scala\n@@ -80,14 +80,14 @@ class RaftMessageFingerprinter extends MessageFingerprinter {\n   }\n }\n \n-class ClientMessageGenerator(raft_members: Seq[String]) extends MessageGenerator {\n-  class AppendWordConstuctor(word: String) extends ExternalMessageConstructor {\n-    def apply() : Any = {\n-      return ClientMessage[AppendWord](Instrumenter().actorSystem.deadLetters, AppendWord(word))\n-    }\n+class AppendWordConstuctor(word: String) extends ExternalMessageConstructor {\n+  def apply() : Any = {\n+    return ClientMessage[AppendWord](Instrumenter().actorSystem.deadLetters, AppendWord(word))\n   }\n+}\n \n-  val wordsUsedSoFar = new HashSet[String]\n+class ClientMessageGenerator(raft_members: Seq[String]) extends MessageGenerator {\n+  var highestWordUsedSoFar = 0\n   val rand = new Random\n   val destinations = new RandomizedHashSet[String]\n   for (dst <- raft_members) {\n@@ -96,13 +96,8 @@ class ClientMessageGenerator(raft_members: Seq[String]) extends MessageGenerator\n \n   def generateMessage(alive: RandomizedHashSet[String]) : Send = {\n     val dst = destinations.getRandomElement()\n-    // TODO(cs): 10000 is a bit arbitrary, and this algorithm fails\n-    // disastrously as we start to approach 10000 Send events.\n-    var word = rand.nextInt(10000).toString\n-    while (wordsUsedSoFar contains word) {\n-      word = rand.nextInt(10000).toString\n-    }\n-    wordsUsedSoFar += word\n+    var word = highestWordUsedSoFar.toString\n+    highestWordUsedSoFar += 1\n     return Send(dst, new AppendWordConstuctor(word))\n   }\n }\n@@ -201,9 +196,9 @@ object Main extends App {\n   val weights = new FuzzerWeights(kill=0.00, send=0.3, wait_quiescence=0.0,\n                                   partition=0.0, unpartition=0)\n   val messageGen = new ClientMessageGenerator(members)\n-  val fuzzer = new Fuzzer(0, weights, messageGen, prefix)\n+  val fuzzer = new Fuzzer(100, weights, messageGen, prefix)\n \n-  val fuzz = false\n+  val fuzz = true\n \n   var traceFound: EventTrace = null\n   var violationFound: ViolationFingerprint = null\n@@ -244,68 +239,25 @@ object Main extends App {\n       depGraph=Some(depGraph), initialTrace=Some(initialTrace),\n       filteredTrace=Some(filteredTrace))\n \n-    val (mcs, stats, verified_mcs, violation) =\n+    val (mcs, stats1, verified_mcs, violation) =\n     RunnerUtils.stsSchedDDMin(false,\n       schedulerConfig,\n       provenanceTrace,\n       violationFound,\n       actorNameProps=Some(ExperimentSerializer.getActorNameProps(traceFound)))\n \n-    val mcs_dir = serializer.serializeMCS(dir, mcs, stats, verified_mcs, violation, false)\n+    if (verified_mcs.isEmpty) {\n+      throw new RuntimeException(\"MCS wasn't validated\")\n+    }\n+    val mcs_dir = serializer.serializeMCS(dir, mcs, stats1, verified_mcs, violation, false)\n+    println(\"verified_mcs.size: \" +\n+      RunnerUtils.getDeliveries(verified_mcs.get).size)\n     println(\"MCS DIR: \" + mcs_dir)\n   } else { // !fuzz\n     val dir =\n-    \"/Users/cs/Research/UCB/code/sts2-applications/experiments/akka-raft-fuzz-long_2015_08_27_13_40_59\"\n+    \"experiments/akka-raft-fuzz-long_2015_08_27_13_40_59\"\n     val mcs_dir =\n-    \"/Users/cs/Research/UCB/code/sts2-applications/experiments/akka-raft-fuzz-long_2015_08_27_13_40_59_DDMin_STSSchedNoPeek\"\n-\n-    val serializer = new ExperimentSerializer(\n-      fingerprintFactory,\n-      new RaftMessageSerializer)\n-\n-    val deserializer = new ExperimentDeserializer(mcs_dir)\n-    val msgDeserializer = new RaftMessageDeserializer(Instrumenter()._actorSystem)\n-\n-    val mcs = deserializer.get_mcs\n-    val actors = deserializer.get_actors\n-    val (verified_mcs, violationFound, _) = RunnerUtils.deserializeExperiment(mcs_dir, msgDeserializer)\n-\n-    var removalStrategy = new SrcDstFIFORemoval(verified_mcs,\n-      schedulerConfig.messageFingerprinter)\n-\n-    val (intMinStats, intMinTrace) = RunnerUtils.minimizeInternals(schedulerConfig,\n-      mcs, verified_mcs, actors, violationFound, removalStrategyCtor=() => removalStrategy)\n-\n-    serializer.recordMinimizationStats(mcs_dir, intMinStats,\n-            stats_file=ExperimentSerializer.internal_stats)\n-\n-    var additionalTraces = Seq[(String, EventTrace)]()\n-\n-    val minimizer = new FungibleClockMinimizer(schedulerConfig, mcs,\n-      intMinTrace, actors, violationFound)\n-      //testScheduler=TestScheduler.DPORwHeuristics)\n-    val (wildcard_stats, clusterMinTrace) = minimizer.minimize\n-\n-    serializer.recordMinimizationStats(mcs_dir, wildcard_stats,\n-            stats_file=ExperimentSerializer.wildcard_stats)\n-\n-    additionalTraces = additionalTraces :+ ((\"FungibleClocks\", clusterMinTrace))\n-\n-    removalStrategy = new SrcDstFIFORemoval(clusterMinTrace,\n-      schedulerConfig.messageFingerprinter)\n-\n-    val (_, minTrace2) = RunnerUtils.minimizeInternals(schedulerConfig,\n-      mcs, clusterMinTrace, actors, violationFound,\n-      removalStrategyCtor=() => removalStrategy)\n-\n-    additionalTraces = additionalTraces :+ ((\"2nd intMin\", minTrace2))\n-\n-    val (traceFound, _, _) = RunnerUtils.deserializeExperiment(dir, msgDeserializer)\n-    val origDeserializer = new ExperimentDeserializer(dir)\n-    val filteredTrace = origDeserializer.get_filtered_initial_trace\n+    \"experiments/akka-raft-fuzz-long_2015_08_27_13_40_59_DDMin_STSSchedNoPeek\"\n \n-    RunnerUtils.printMinimizationStats(\n-      traceFound, filteredTrace, verified_mcs, intMinTrace, schedulerConfig.messageFingerprinter,\n-      additionalTraces)\n   }\n }",
      "status": "On branch raft-56\nYour branch is ahead of 'origin/raft-56' by 26 commits.\n  (use \"git push\" to publish your local commits)\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git checkout -- <file>...\" to discard changes in working directory)\n\n\tmodified:   src/main/scala/pl/project13/Runner.scala\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")"
    }
  },
  "sys": {
    "lsb_release": "",
    "uname": "Darwin yossarian 14.5.0 Darwin Kernel Version 14.5.0: Wed Jul 29 02:26:53 PDT 2015; root:xnu-2782.40.9~1/RELEASE_X86_64 x86_64"
  },
  "timestamp": "2015_09_02_12_48_32",
  "user": "cs"
}
